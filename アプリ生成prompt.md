あなたはシニアフルスタックエンジニア兼プロダクトデザイナーです。
bolt.new（StackBlitz）上で動作する AIエージェント内蔵Webアプリ を、動くコードとして生成してください。

--- ## 1. アプリの目的（ゴール）
「仮説キャンバス〜仮説展開ストーリー作成」を、決められた手順に沿って段階的に実行できるアプリを作る
各ステップでの ユーザー入力・AI出力をすべて保持 し、後から見返せる
OpenAI API Key は 開発者が .env に固定で設定 する（ユーザー入力UIは不要）
OpenAI呼び出しは 必ずサーバー側から実行（クライアント直呼び禁止）
各ステップ実行時は、これまでの履歴（入力＋出力）を毎回送信し、文脈を維持する
--- ## 2. 実行手順（procedure）
このアプリは、以下のステップを 上から順にのみ実行可能 とする：

prompt1~13は仮説キャンバスprompt.mdに記載

### Step1：仮説キャンバス作成
使用プロンプト：prompt1
ユーザーが 1〜14 の項目を入力
AIが仮説キャンバス（Markdown）を生成
### Step2：仮説の一本線作成
使用プロンプト：prompt2
Step1の仮説キャンバスを入力として、大きく異なる3つのストーリーラインを生成
ユーザーが 1〜3 の番号を選択
### Step3：一本線をキャンバスに反映
使用プロンプト：prompt3
選択された番号を @（選択） に代入
仮説キャンバスを再生成
### Step4：Fit-Journey確認
使用プロンプト：prompt4
CPF / PSF / SPF / PMF を文章化
### Step5：Fit-Journeyをキャンバスに反映
使用プロンプト：prompt5
仮説キャンバスを修正
### Step6：整合性チェック
使用プロンプト：prompt6
整合性を確認し、修正後の仮説キャンバスのみを出力
### Step7：仮説展開ストーリー作成
使用プロンプト：prompt10
1手目（3か月後）／2手目（1年後）／3手目（3年後）を作成
※ prompt11〜13 は後から追加できるよう、拡張しやすい設計にする

--- ## 3. プロンプト仕様
prompt1〜prompt6、prompt10 は アプリ内にテンプレート文字列として固定で保持
各ステップ実行時に、必要な過去出力を差し込んでAIに送信する
プロンプト本文は Markdown 形式
AI出力も Markdown として表示する
--- ## 4. OpenAI 接続要件（重要）
OpenAI API は Responses API を使用する

API Key は .env に以下の形式で設定する：

OPENAI_API_KEY=sk-xxxx

サーバー側（API Route / Server Function）のみで
process.env.OPENAI_API_KEY を参照する

フロントエンドに API Key を渡さない

クライアントからは /api/run のような内部APIを呼ぶだけにする

--- ## 5. 履歴管理（DBなし）
DBは使用しない
すべての履歴は ブラウザ側で永続化する
localStorage または IndexedDB
プロジェクト単位で以下を保存：
各ステップの入力
各ステップのAI出力
実行日時
ページをリロードしても履歴は残る
過去のプロジェクトを選択して再閲覧できる
--- ## 6. UI要件
3ペイン構成：
左：ステップ一覧（未実行／実行済み／選択待ちが分かる）
中：現在ステップの入力フォーム
右：AI出力（Markdownレンダリング）
「次のステップへ」ボタンは、前ステップ完了後のみ有効
Step2 のような 番号選択UI を共通コンポーネント化
出力はコピー可能・折りたたみ可能
--- ## 7. 技術スタック
Next.js（App Router）
TypeScript
Tailwind CSS + shadcn/ui
サーバー処理：Next.js Route Handler
Markdown表示：XSS対策されたMarkdownレンダラ
状態管理：Zustand など任意
--- ## 8. 必須アウトプット
フォルダ構成
.env の設定方法
/api/run の実装
プロンプト実行エンジン（ステップ定義 → 入力差し込み → 実行 → 保存）
履歴保存・復元ロジック
README（セットアップ〜使い方）
--- ## 9. 受け入れ条件（Acceptance Criteria）
Step1〜Step7 まで UI 操作のみで完走できる
リロード後も履歴を確認できる
API Key がフロントに露出しない
Markdown出力が崩れず表示される
APIエラー時に分かりやすいエラー表示が出る
まずは MVP を完成させ、その後の拡張案も提案してください。
スクロール可能


